<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }

        svg {
            display: block;
        }
        html, body, #chart1, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
        button {
            margin: 2px;
            margin-left: 2px;
        }
       
    </style>
</head>
<body>
<div style="position:absolute; top: 0; left: 0;">
    <button onclick="chart.focusEnable(!chart.focusEnable()); chart.update();">toggle focus</button>
    <span style="color: #C60;">&lt;turn focus on or off!</span>
</div>
   
<div id="chart1" class='with-3d-shadow with-transitions'>
    <svg> </svg>
</div>

<script>
    //1236005200000
    var testdata = [
        {
            "key" : "NYSE Market Value" ,
            "bar": true,
            "values" : [ [ 1136005200000 , 14909907739038.0] , [ 1138683600000 , 15223042873231.0] , [ 1141102800000 , 15271758879274.0] , [ 1143781200000 , 15484784749779.0] , [ 1146369600000 ,15783810262496.0] , [ 1149048000000 , 15765163742513.0] , [ 1151640000000 , 15142948592831.0] , [ 1154318400000 , 15314404109761.0] , [ 1156996800000 , 15732249979333.0] , [ 1159588800000 , 15786295292812.0] , [ 1162270800000 , 16247773434959.0] , [ 1164862800000 , 16594618301452.0] , [ 1167541200000 , 16934344620859.0] , [ 1170219600000 , 17105376045521.0] , [ 1172638800000 , 17463026810528.0] , [ 1175313600000 , 17052835651788.0] , [ 1177905600000 , 17766866591960.0] , [ 1180584000000 , 18229276215824.0] , [ 1183176000000 , 18416684368434.0] , [ 1185854400000 , 18170747208653.0] , [ 1188532800000 , 17303704219869.0] , [ 1191124800000 , 17830660787201.0] , [ 1193803200000 , 18257824864931.0] , [ 1196398800000 , 17365286679391.0] , [ 1199077200000 , 17506770972027.0] , [ 1201755600000 , 16324000747349.0] , [ 1204261200000 , 16316051536251.0] , [ 1206936000000 , 15889348943618.0] , [ 1209528000000 , 16410915994728.0] , [ 1212206400000 , 16872113807998.0] , [ 1214798400000 , 16123771859266.0] , [ 1217476800000 , 15018847576673.0] , [ 1220155200000 , 15128954458008.0] , [ 1222747200000 , 14433866062614.] , [ 1225425600000 , 11368663995459.0] , [ 1228021200000 , 10115157481838.0] , [ 1230699600000 , 10177804230277.0] , [ 1233378000000 , 10066356490017.0] , [ 1235797200000 , 9334586175277.0] , [ 1238472000000 , 8606929335737.0] , [ 1241064000000 , 9764204198799.0] , [ 1243742400000 , 10438516683247.0] , [ 1246334400000 , 10668746161165.0] , [ 1249012800000 , 10707410941145.0] , [ 1251691200000 , 11778832596115.0] , [ 1254283200000 , 12277487033636.0] , [ 1256961600000 , 12473176886128.0] , [ 1259557200000 , 12633764734563.0] , [ 1262235600000 , 12885461830626.0] , [ 1264914000000 , 13167681271666.0] , [ 1267333200000 , 12693540699934.0] , [ 1270008000000 , 13449240781441.0] , [ 1272600000000 , 13975193652133.0] , [ 1275278400000 , 13179192273012.0] , [ 1277870400000 , 12673434173122.0] , [ 1280548800000 , 12613715754614.0] , [ 1283227200000 , 12852637144366.0] , [ 1285819200000 , 13273207576758.0] , [ 1288497600000 , 13839345692396.0] , [ 1291093200000 , 14047758989241.0] , [ 1293771600000 , 14505602330834.0] , [ 1296450000000 , 15134510201628.0] , [ 1298869200000 , 15592916771972.0] , [ 1301544000000 , 15955912363197.0] , [ 1304136000000 , 15953147121289.0] , [ 1306814400000 , 15847569793104.0] , [ 1309406400000 , 15377622649633.0] , [ 1312084800000 , 13960509341417.0] , [ 1314763200000 , 13901581430781.0] , [ 1317355200000 , 11758757883127.0] , [ 1320033600000 ,13334810049209.0] , [ 1322629200000 , 12666703515029.0] , [ 1325307600000 , 13176548789307.0] , [ 1327986000000 , 13708157737337.0] , [ 1330491600000 , 13928454370248.0] , [ 1333166400000 , 14450316358311.0] , [ 1335758400000 , 14464131479136.0]]
        },
        {
            "key" : "NYSE Listed Shares" ,
            "values" : [ [ 1136005200000 , 403246240244] , [ 1138683600000 , 403545207225] , [ 1141102800000 , 403161371944] , [ 1143781200000 , 404323132896] , [ 1146369600000 , 407116917965] , [ 1149048000000 , 409883533486] , [ 1151640000000 , 410686483978], [ 1154318400000 , 415559723611] , [ 1156996800000 , 420255013051] , [ 1159588800000 , 418570753857] , [ 1162270800000 , 417899226042] , [ 1164862800000 , 418787688666] , [ 1167541200000 , 411352599906] , [ 1170219600000 , 415238366264] , [ 1172638800000 , 415305068220] , [ 1175313600000 , 416450840859] , [ 1177905600000 , 419882340067] , [ 1180584000000 , 418382627137] , [ 1183176000000 , 422313735151] , [ 1185854400000 , 419564183458] , [ 1188532800000 , 420466100622] , [ 1191124800000 , 420420502866] , [ 1193803200000 , 420902642381] , [ 1196398800000 , 420658025395] , [ 1199077200000 , 420046027564] , [ 1201755600000 , 421395913545] , [ 1204261200000 , 421271458022] , [ 1206936000000 , 423677315454] , [ 1209528000000 , 423284235410] , [ 1212206400000 , 425208091515] , [ 1214798400000 , 425506310992] , [ 1217476800000 , 424337939858] , [ 1220155200000 , 424517514259] , [ 1222747200000 , 427249360111] , [ 1225425600000 , 443243615237] , [ 1228021200000 , 439637727848] , [ 1230699600000 , 432760903888] , [ 1233378000000 , 427406854172] , [ 1235797200000 , 426370728025] , [ 1238472000000 , 419911658178] , [ 1241064000000 , 422432458623] , [ 1243742400000 , 419675848626] , [ 1246334400000 ,417806747691] , [ 1249012800000 , 414573946559] , [ 1251691200000 , 424028245146] , [ 1254283200000 , 424750456425] , [ 1256961600000 , 423327865673] , [ 1259557200000 , 439842513290] , [ 1262235600000 , 439995767563] , [ 1264914000000 , 448313943691] , [ 1267333200000 , 447458577560] , [ 1270008000000 , 448608126549] , [ 1272600000000 , 448977947400] , [ 1275278400000 , 452851485917] , [ 1277870400000 , 451863900100] , [ 1280548800000 , 449355268053] , [ 1283227200000 , 453213717056] , [ 1285819200000 , 453162681409] , [ 1288497600000 , 453043876609] , [ 1291093200000 ,  458475213378] , [ 1293771600000 , 458511003310] , [ 1296450000000 , 462403206607] , [ 1298869200000 , 462510764594] , [ 1301544000000 , 474738073550] , [ 1304136000000 , 465545129984] , [ 1306814400000 , 439049241455] , [ 1309406400000 , 439142679182] , [ 1312084800000 , 419502493981] , [ 1314763200000 , 436057075543] , [ 1317355200000 , 470684124558] , [ 1320033600000 , 471750989006] , [ 1322629200000 , 418114322339] , [ 1325307600000 , 415612338571] , [ 1327986000000 , 414681290765] , [ 1330491600000 , 414477714990] , [ 1333166400000 , 418040161721] , [ 1335758400000 , 421657330251] ]
        }
    ].map(function(series) {
            series.values = series.values.map(function(d) { return {x: d[0], y: d[1] } });
            return series;
        });

    var chart;
    nv.addGraph(function() {
        chart = nv.models.linePlusBarChart()
            .margin({top: 70, right: 120, bottom: 20, left: 150})
            .x(function(d,i) { return i })
            .legendRightAxisHint(' [Using Right Axis]')
            .color(d3.scale.category10().range());

        chart.xAxis.tickFormat(function(d) {
            var dx = testdata[0].values[d] && testdata[0].values[d].x || 0;
            return dx ? d3.time.format('%x')(new Date(dx)) : '';
            })
            .showMaxMin(false);

        chart.y1Axis.tickFormat(function(d) { return '$' + d3.format(',f')(d) });
        chart.bars.forceY([0]).padData(false);

        chart.xAxis.showMaxMin(false);
        chart.x2Axis.showMaxMin(false);

        d3.select('#chart1 svg')
            .datum(testdata)
            .transition().duration(500).call(chart);

        nv.utils.windowResize(chart.update);

        chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

        return chart;
    });

</script>
</body>
</html>